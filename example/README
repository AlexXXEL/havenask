开始检索之前，需要手动构建索引，目前只支持全量构建。构建索引需要准备配置和原始数据。
配置的形式请参考config目录，数据格式请参考data目录，请根据业务需求和实际数据格式对配置和数据进行修改。如何修改配置和数据格式的详解请参考问天引擎文档。

可以通过下面几个步骤手动完成索引的构建和searcher的启动，也可以通过scripts目录下的build_demo_data.py、start_demo_searcher.py自动执行。

假设安装目录为/home/xx/ha3_opensource/ha3_install，使用的配置为/home/xx/ha3_opensource/example/normal_config，工作目录为/home/xx/ha3_opensource/example/workdir。
1.构建全量索引，
 1) 创建workdir，mkdir /home/xx/ha3_opensource/example/workdir

 2) /home/xx/ha3_opensource/ha3_install/usr/local/bin/bs startjob -c /home/xx/ha3_opensource/example/config/normal_config/offline_config/ -n in0 -j local -m full -d /home/xx/ha3_opensource/example/data/test.data -w /home/xx/ha3_opensource/example/workdir -i ./runtimedata -p 1 --documentformat=ha3

 3) 等待索引构建完成，如果报错可以查看workdir下面的bs.log文件，索引产出在workdir下runtimedata目录（-i参数指定）

 注意：使用时请替换上面的按照路径和配置的路径，建议在指定-c、-d、-w参数时使用绝对路径。具体的参数含义可以执行/home/xx/ha3_opensource/ha3_install/usr/local/bin/bs -h查看。

2.使用构建的索引，启动单机服务进行检索，执行时请将下面的目录地址替换为真实的地址
 1) 进入workdir目录，cd /home/xx/ha3_opensource/example/workdir
 2) 启动searcher和qrs，python /home/xx/ha3_opensource/ha3_install/usr/local/lib/python/site-packages/ha_tools/local_search_starter.py -i ./runtimedata/ -c /home/xx/ha3_opensource/example/normal_config/online_config/ -p 30468,30480 -b /home/xx/ha3_opensource/ha3_install
 3) 启动成功后，会输出qrs的http和arpc端口，可以使用http端口进行测试。也可以通过参数--qrsHttpArpcBindPort指定固定的http端口。假设执行之后使用的qrs http端口为12345。
 4) 获取qrs http端口后（假设为12345），可以直接通过curl命令进行查询测试，也可以使用脚本进行测试，下面是一些测试query：
  a. python curl_http.py 12345 "query=select count(*) from in0"
  b. python curl_http.py 12345 "query=select id,hits from in0 where MATCHINDEX('title', '搜索词典')"
  c. python curl_http.py 12345 "query=select title, subject from in0_summary_ where id=1 or id=2"
  其他查询语法请参考：https://help.aliyun.com/document_detail/397309.html

 注意：使用时请替换上面的按照路径和配置的路径，具体参数含义可以执行python /home/xx/ha3_opensource/ha3_install/usr/local/lib/python/site-packages/ha_tools/local_search_starter.py -h查看