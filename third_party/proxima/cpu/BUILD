load('//bazel:defs.bzl', 'rpm_library')
hdrs = [
    'aitheta/algorithm/mips_reformer.h', 'aitheta/algorithm/vector_mean.h',
    'aitheta/algorithm/vector_uniform.h', 'aitheta/algorithm/vector_variance.h',
    'aitheta/binary_index_holder.h', 'aitheta/extra_memory_storage.h',
    'aitheta/float_index_holder.h', 'aitheta/index_builder.h',
    'aitheta/index_bundle.h', 'aitheta/index_cluster.h',
    'aitheta/index_distance.h', 'aitheta/index_error.h',
    'aitheta/index_factory.h', 'aitheta/index_features.h',
    'aitheta/index_format.h', 'aitheta/index_framework.h',
    'aitheta/index_holder.h', 'aitheta/index_logger.h', 'aitheta/index_meta.h',
    'aitheta/index_package.h', 'aitheta/index_params.h',
    'aitheta/index_plugin.h', 'aitheta/index_reducer.h',
    'aitheta/index_searcher.h', 'aitheta/index_seeker.h',
    'aitheta/index_storage.h', 'aitheta/index_streamer.h',
    'aitheta/index_trainer.h', 'aitheta/int16_index_holder.h',
    'aitheta/int8_index_holder.h', 'aitheta/utility/bitmap.h',
    'aitheta/utility/bitset_helper.h', 'aitheta/utility/blob_wrap.h',
    'aitheta/utility/bloom_filter.h', 'aitheta/utility/closure.h',
    'aitheta/utility/crypto.h', 'aitheta/utility/cube.h',
    'aitheta/utility/distance.h', 'aitheta/utility/distance_matrix.h',
    'aitheta/utility/euclidean_distance_matrix.h', 'aitheta/utility/factory.h',
    'aitheta/utility/file.h', 'aitheta/utility/fixed_bitset.h',
    'aitheta/utility/fixed_vector.h', 'aitheta/utility/fp16_helper.h',
    'aitheta/utility/heap.h', 'aitheta/utility/hyper_cube.h',
    'aitheta/utility/inner_product_matrix.h',
    'aitheta/utility/internal/bitset.h',
    'aitheta/utility/internal/cpu_features.h',
    'aitheta/utility/internal/crc32c.h', 'aitheta/utility/internal/distance.h',
    'aitheta/utility/internal/platform.h', 'aitheta/utility/json.h',
    'aitheta/utility/json/mod_json.h', 'aitheta/utility/json/mod_json_plus.h',
    'aitheta/utility/lock.h', 'aitheta/utility/lockfree_stack.h',
    'aitheta/utility/memory_helper.h', 'aitheta/utility/mmap_file.h',
    'aitheta/utility/reservoir_sampler.h', 'aitheta/utility/string_helper.h',
    'aitheta/utility/thread_pool.h', 'aitheta/utility/time_helper.h',
    'aitheta/utility/type_helper.h', 'aitheta/utility/vector.h',
    'aitheta/version.h', 'proxima/autotune/auto_tune.h',
    'proxima/autotune/tune_common.h', 'proxima/build_adapter/async_builder.h',
    'proxima/build_adapter/block_queue.h',
    'proxima/build_adapter/circular_queue.h', 'proxima/build_adapter/lock.h',
    'proxima/build_adapter/streamed_holder.h', 'proxima/common/common_define.h',
    'proxima/common/file_index_holder.h', 'proxima/common/params_define.h',
    'proxima/common/pq_codebook.h'
]
rpm_library(
    name='proxima',
    hdrs=hdrs,
    static_lib='libproxima.a',
    static_libs=[
        'libknn_cluster.a', 'libknn_utils.a', 'libknn_linear.a', 'libknn_hc.a',
        'libknn_pq.a', 'libknn_graph.a', 'libknn_hnsw.a', 'libaitheta.a',
        'libknn_auto_tune.a', 'libknn_tree.a'
    ],
    include_path='usr/local/proxima/include/',
    lib_path='usr/local/proxima/lib/',
    include_prefix='',
    alwayslink=1
)
