# -*- mode: python -*-

Import('env')
env = env.Clone()

inverted_index_test_sources = [
    '#indexlib/test/dotest.cpp',
    '#indexlib/index/test/partition_info_creator.cpp',
    'normal_index_reader_helper.cpp',
    'posting_writer_helper.cpp',
    'doc_range_partitioner_unittest.cpp',
    'index_reader_unittest.cpp',
    'normal_index_writer_unittest.cpp',
    'posting_decoder_impl_unittest.cpp',
    'index_format_option_unittest.cpp',
    'position_list_encoder_unittest.cpp',
    'doc_list_encoder_unittest.cpp',
    'normal_index_reader_unittest.cpp',
    'posting_writer_impl_unittest.cpp',
    'doc_list_format_option_unittest.cpp',
    'position_list_format_option_unittest.cpp',
    'in_mem_normal_index_segment_reader_unittest.cpp',
    'dict_inline_encoder_unittest.cpp',
    'dict_inline_decoder_unittest.cpp',
    'posting_format_option_unittest.cpp',
    'dict_inline_formatter_unittest.cpp',
    'dict_inline_posting_decoder_unittest.cpp',
    'in_mem_doc_list_decoder_unittest.cpp',
    'buffered_byte_slice_unittest.cpp',
    'posting_merger_impl_unittest.cpp',
    'posting_format_unittest.cpp',
    'flush_info_unittest.cpp',
    'position_list_segment_decoder_unittest.cpp',
    'in_mem_position_list_decoder_unittest.cpp',
    'buffered_byte_slice_reader_unittest.cpp',
    'in_memory_index_segment_writer_unittest.cpp',
    'normal_index_segment_reader_unittest.cpp',
    'multi_sharding_index_writer_unittest.cpp',
    'multi_sharding_index_reader_unittest.cpp',
    'term_meta_loader_unittest.cpp',
    'term_meta_unittest.cpp',
    'buffered_index_decoder_unittest.cpp',
    'buffered_posting_iterator_unittest.cpp',
    'in_doc_position_iterator_state_unittest.cpp',
    'index_accessory_reader_unittest.cpp',
    'index_merger_intetest.cpp',
    'index_merger_unittest.cpp',
    'index_term_extender_unittest.cpp',
    'multi_field_index_reader_unittest.cpp',
    'normal_in_doc_position_iterator_unittest.cpp',
    'normal_in_doc_state_unittest.cpp',
    'on_disk_index_iterator_unittest.cpp',
    'position_bitmap_reader_unittest.cpp',
    'posting_iterator_impl_unittest.cpp',
    'segment_posting_unittest.cpp',
    'segment_term_info_queue_unittest.cpp',
    'segment_term_info_unittest.cpp',
    'short_list_optimize_util_unittest.cpp',
]

inverted_libs = [
    'indexlib_indextest_common',
    'indexlib_commontest_common',
    'indexlib_test',
    'indexlib_testlib',
    'indexlib_partition',
    'indexlib_merger',
    'indexlib_table',
    'indexlib_index',
    'indexlib_index_base',
    'indexlib_document',
    'indexlib_common',
    'indexlib_plugin',
    'indexlib_config',
    'indexlib_file_system',
    'indexlib_storage',
    'indexlib_util',
    'indexlib_misc',
    'gmock',
    'gtest',
]

env.aTest(target = 'indexlib_inverted_index_unittest', 
          source = inverted_index_test_sources, LIBS = inverted_libs)


